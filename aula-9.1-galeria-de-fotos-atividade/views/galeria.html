{% extends 'base.html' %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/galeria.css') }}">
<h1 class="galeria-titulo playfair-display">Galeria de Obras</h1>
<p class="galeria-subtitulo">Explore nossa coleção de arte digital</p>

{% with messages = get_flashed_messages(with_categories=true) %}
{% for category, message in messages %}
<div class="alert alert-{{category}} elegant-card mb-4">
    <i class="fas fa-info-circle me-2"></i>{{message}}
</div>
{% endfor %}
{% endwith %}

<div class="container col-12 col-md-8 col-lg-6">
    <div class="elegant-card upload-section mt-5">
        <div class="card-body text-center">
            <h3 class="playfair-display mb-4" style="color: #2c2416;">
                <i class="fas fa-cloud-upload-alt me-2"></i>Contribua com a Galeria
            </h3>
            <p class="mb-4" style="color: #8a6d3b;">
                Compartilhe sua obra de arte para enriquecer nossa coleção digital
            </p>
            <form action="{{url_for('galeria')}}" method="post" enctype="multipart/form-data">
                <div class="mb-3 text-start">
                    <label class="form-label">Nome da Obra *</label>
                    <input type="text" name="nome_obra" class="form-control form-input-custom" 
                           placeholder="Ex: Mona Lisa, Noite Estrelada..." required>
                </div>
                <div class="mb-4 text-start">
                    <label class="form-label">Imagem da Obra *</label>
                    <input name="file" class="form-control file-input-custom" type="file" 
                           required accept="image/*">
                </div>
                <button class="btn btn-museu btn-lg">
                    <i class="fas fa-upload me-2"></i>Enviar Obra
                </button>
            </form>
        </div>
    </div>
</div>

<div class="section-divider"></div>

<div class="row">
    {% for img in imagens %}
    <div class="col-md-6 col-lg-4">
        <div class="obra-container text-center">
            <div class="moldura-museu">
                <img src="{{ url_for('static', filename='uploads/' + img.filename) }}" 
                     alt="{{ img.nome_obra }}" 
                     class="img-obra">
            </div>
            <div class="obra-info">
                <h5 class="obra-titulo">{{ img.nome_obra }}</h5>
                <p class="obra-artista">{{ img.artista }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock content %}